{% extends 'base.html' %}
{% block content %}
{% load static %}

<style>
    .page-wrapper {
        background: #eef5f9;
        position: relative;
        width: 78%;
        margin-left: 265px;
    }
    .mainPage1 {
      padding-top: 100px !important;
      padding-bottom: 20px;
      width: 62%;
      margin: 0;
  }
    .Permission_btn {
      border: 1px solid #d1d3e1;
      border-radius: 5px;
      background-color: transparent;
      padding: 5px 12px;
      color: #858995;
    }
    .btn-primary1 {
      color: #fff;
      background-color: #890015;
      border-color: #890015;
      height: 34px;
      margin-top: 20px;
      margin-bottom: 20px;
    }
    .edit_staff{
      background-color: #fff;
      border-radius: 10px;
    }
</style>
{% for message in messages %}   
<b  class="messageMain">{{message}}</b>
{% endfor %} 
</head>
{% if selected_permissions and  is_staff or is_superuser %}  
<body>
 
<div class="container-fluid mainPage1">
  <div class="container-fluid edit_staff py-5">
    <div class="row">
      <div class="application-detail-heading-area text-center">
        <h2 class="noti_detail">Edit  Staff</h2>
      </div>
      </div>
      <form name="enquiry_form" enctype="multipart/form-data" class="contact-form-main-area" method="POST" id="myForm" onsubmit="return validateForm();">
        {% csrf_token %}

        <div class="row">
          <div class="col-lg-12 mt-3">
            <div class="form-group">
              <label>First Name</label>
              <input type="text" value="{{data.first_name}}"class="form-control change_border" placeholder="Enter Your First Name" name="first_name" id="username">
            </div>
            <div class="form-group">
                <label>First Name</label>
                <input type="text" value="{{data.last_name}}"class="form-control change_border" placeholder="Enter Your First Name" name="last_name" id="username">
              </div>

            <p id="username_error_message" class="error-message"></p>
          </div>
       

          <div class="col-lg-12">
            <div class="form-group">
              <label>Email</label>
              <input type="email"  class="form-control change_border" value="{{data.email}}" placeholder="Enter Your Email" name="email" id="email">
            </div>
            <p id="email_error_message" class="error-message"></p>
          </div>
          
          <div class="col-lg-12">
            <div class="form-group">
              <label class="form-label" for="phone">Phone number</label>
              <input type="tel" id="ContactNumberId" class="form-control field change_border"  value="{{data.phone_number}}" name="phone_number" minlength="10" maxlength="10" placeholder="Enter Contact number" autofocus  id="contactNumberInput" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);">
            </div>
            <p id="phone_number_error_message" style="color: red; font-weight: bold;"></p>

          </div>

        

          <div class="dropdown">
            <div class="dropdown">
              <button class="Permission_btn dropdown-toggle" type="button" data-toggle="dropdown" id="permissionsContainer" aria-expanded="false">
                Select 
              </button>
            
            <ul class="dropdown-menu dropscroll" aria-labelledby="dropdownMenuButton1" id="columnsListDropDown">
                <li>
                  <a class="dropdown-item">
                    <input type="checkbox" id="dashboardCheckbox" name="permissions_checkbox" value="dashboard" {% if staff_menu.dashboard == "1" %}checked{% endif %}>
                    <label for="dashboardCheckbox">Dashboard</label>
                  </a>
                  </li>
                                    
                
                  <li><a class="dropdown-item"><input type="checkbox" id="dashboardCheckbox" name="permissions_checkbox" value="details_book"{% if staff_menu.details_book == '1' %}checked{% endif %}>
                  <label for="dashboardCheckbox">Books Details</label></a></li>
                

                  <li><a class="dropdown-item"><input type="checkbox" id="vehicle4"  name="permissions_checkbox" value="user_details" {% if staff_menu.user_details == "1" %}checked{% endif %}>
                  <label for="vehicle4">Manage Users </label></a></li>

                  <li><a class="dropdown-item"><input type="checkbox" id="vehicle4"  name="permissions_checkbox" value="manage_category" {% if staff_menu.manage_category == "1" %}checked{% endif %}>
                    <label for="vehicle4"> Manage Category</label></a></li>

                  <li><a class="dropdown-item"><input type="checkbox" id="vehicle4"  name="permissions_checkbox" value="manage_collection" {% if staff_menu.manage_collection == "1" %}checked{% endif %}>
                    <label for="vehicle4"> Manage Collection</label></a></li>
              
                  <li><a class="dropdown-item"><input type="checkbox" id="vehicle4"  name="permissions_checkbox" value="ebook_reader" {% if staff_menu.ebook_reader == "1" %}checked{% endif %}>
                    <label for="vehicle4"> Manage Ebook Reader</label></a></li>


                  <li><a class="dropdown-item"><input type="checkbox" id="vehicle4"  name="permissions_checkbox" value="notifications" {% if staff_menu.notifications == "1" %}checked{% endif %}>
                    <label for="vehicle4"> Manage Notifications</label></a></li>


                    <li><a class="dropdown-item"><input type="checkbox" id="vehicle4"  name="permissions_checkbox" value="manage_staff" {% if staff_menu.manage_staff == "1" %}checked{% endif %}>
                      <label for="vehicle4"> Manage Staffs</label></a></li>


                  <li><a class="dropdown-item"><input type="checkbox" id="vehicle4"  name="permissions_checkbox" value="manage_blogs" {% if staff_menu.manage_blogs == "1" %}checked{% endif %}>
                    <label for="vehicle4"> Manage Blogs </label></a></li>
  
                  
                  <li><a class="dropdown-item"><input type="checkbox" id="vehicle4"  name="permissions_checkbox" value="manage_cms" {% if staff_menu.manage_cms == "1" %}checked{% endif %}>
                    <label for="vehicle4"> Manage CMS</label></a></li>


            </ul>
          </div>        
        </a>
          <div class="col-lg-12">
            <div class="contact-form-submint-btn-area text-center">
              <button class=" btn btn-primary1" type="submit" onclick="validateForm()" >Submit</button>
            </div>
          </div>
        </div>

      </form>
    </div>
  </div>
</div>
{% endif %}
</body>

<script>
  $('#columnsListDropDown li label').click(function(e){
    e.stopPropagation();
})
</script>
<script>
    function validateForm() {
      var usernameInput = document.getElementById("username");
      var firstNameInput = document.getElementById("first_name");
      var lastNameInput = document.getElementById("last_name");
      var emailInput = document.getElementById("email");
      var phone_numberInput = document.getElementById("ContactNumberId");
      var phoneNumberType = phone_numberInput.getAttribute("type");
      var documentInput = document.getElementById("document");
      var passwordInput = document.getElementById("PasswordId");
  
    var errorMessages = {
        username: "Please enter your username.",
        firstName: "Please enter your first name.",
        lastName: "Please enter your last name.",
        email: "Please enter a valid email address.",
        phone_numberInput:  "Please enter a valid 8-digit contact number.",
        password :"Please enter a passowrd",
        
        document: "Please choose a document."
      };
  
      var isValid = true;
  
      if (usernameInput.value.trim() === "") {
        displayErrorMessage("username_error_message", errorMessages.username);
        isValid = false;
      } else {
        clearErrorMessage("username_error_message");
      }
  
      if (firstNameInput.value.trim() === "") {
        displayErrorMessage("first_name_error_message", errorMessages.firstName);
        isValid = false;
      } else {
        clearErrorMessage("first_name_error_message");
      }
  
      if (lastNameInput.value.trim() === "") {
        displayErrorMessage("last_name_error_message", errorMessages.lastName);
        isValid = false;
      } else {
        clearErrorMessage("last_name_error_message");
      }



      if (passwordInput.value.trim() === "") {
        displayErrorMessage("password_error_message", errorMessages.password);
        isValid = false;
      } else {
        clearErrorMessage("password_error_message");
      }
  
  if (!isValidEmail(emailInput.value.trim())) {
        displayErrorMessage("email_error_message", errorMessages.email);
        isValid = false;
      } else {
        clearErrorMessage("email_error_message");
      }

      if (phoneNumberType === "tel") {
        var phoneNumber = phone_numberInput.value;
        var phoneNumberPattern = /^\d{10}$/; // Matches a 10-digit number
  
        // Check if the phone number matches the pattern
        if (!phoneNumberPattern.test(phoneNumber)) {
          displayErrorMessage("phone_number_error_message", errorMessages.phone_numberInput);
          isValid = false;
        } else {
          clearErrorMessage("phone_number_error_message");
        }
      }
      
      if (documentInput.value.trim() === "") {
        displayErrorMessage("document_error_message", errorMessages.document);
        isValid = false;
      } else {
        clearErrorMessage("document_error_message");
      }
  
      return isValid;
    }
  
    function displayErrorMessage(elementId, message) {
      var errorMessage = document.getElementById(elementId);
      errorMessage.textContent = message;
    }
  
    function clearErrorMessage(elementId) {
      var errorMessage = document.getElementById(elementId);
      errorMessage.textContent = "";
    }
  
    function isValidEmail(email)
{
      var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
}
  
    function isValidPhoneNumber(phoneNumber) {
      var phoneNumberRegex = /^\d{10}$/;
      return phoneNumberRegex.test(phoneNumber);
    }
  </script>


  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
  $(document).ready(function() {
    // Handle checkbox selection and update the field value
    $('.dropdown-checkbox .dropdown-item input[type="checkbox"]').change(function() {
      var checkbox = $(this);
      var checkboxValue = checkbox.val();
      var checkboxChecked = checkbox.is(':checked');
      var dropdownItem = checkbox.closest('.dropdown-item');
      var dropdownLink = dropdownItem.attr('href');
  
      // Update the URL in the dropdown item
      if (checkboxChecked) {
        dropdownItem.attr('href', checkboxValue);
      } else {
        dropdownItem.attr('href', '#');
      }
    });
  });
    
  $('#columnsListDropDown li label').click(function(e){
    e.stopPropagation();
})
  </script>
</html>
{% endblock %}



